# STEP NEXT-2 â€” Response View Model ë° UX ìµœì¢… ëª…ì„¸ì„œ

**ë¬¸ì„œ ëª©ì **: UI ê°œë°œ ì°©ìˆ˜ ì „ ì‘ë‹µ êµ¬ì¡° ë° ì‚¬ìš©ì ê²½í—˜ ê³ ì •
**ì‘ì„±ì¼**: 2025-12-28
**íš¨ë ¥**: ë³¸ ë¬¸ì„œëŠ” API â†” UI ê°„ ê³„ì•½ì„œ(contract)ë¡œ ì‘ë™í•˜ë©°, ì„ì˜ ë³€ê²½ ê¸ˆì§€

---

## 0. ì „ì œ ì¡°ê±´ (Prerequisites)

### 0.1 ì‹œìŠ¤í…œ ì™„ë£Œ ìƒíƒœ

ë³¸ ëª…ì„¸ì„œëŠ” ë‹¤ìŒì´ ì´ë¯¸ ì™„ë£Œë˜ì—ˆìŒì„ ì „ì œí•œë‹¤:

- âœ… **DB Schema**: coverage_standard, coverage_instance, evidence_ref, amount_fact
- âœ… **Idempotent Loader**: instance_key/evidence_key ê¸°ë°˜ upsert ì™„ë£Œ
- âœ… **Metadata Baseline**: 8ê°œ ë³´í—˜ì‚¬, 41ê°œ ë‹´ë³´, ë¬¸ì„œ ì¶œì²˜ í™•ì •
- âœ… **Natural Key Design**: reset â†’ load ë°˜ë³µ ì‹œ ê²°ê³¼ ë¶ˆë³€ ê²€ì¦ ì™„ë£Œ

### 0.2 ê³ ê° ìš”êµ¬ì‚¬í•­ ë°˜ì˜ ìš°ì„ ìˆœìœ„

1. **ì˜ˆì œ 3ë²ˆ (ìƒí’ˆ ì¢…í•© ë¹„êµ)** â€” ìµœìš°ì„  ë°˜ì˜
2. ì˜ˆì œ 1ë²ˆ (ë³´ì¥ ì—¬ë¶€ í™•ì¸)
3. ì˜ˆì œ 2ë²ˆ (íŠ¹ì • ë‹´ë³´ ë¹„êµ)
4. ì˜ˆì œ 4ë²ˆ (ë³´í—˜ë£Œ ë¹„êµ) â€” ì œí•œì  ì§€ì›

---

## 1. Response View Model (ìµœì¢… ê³ ì •)

### 1.1 ìµœìƒìœ„ êµ¬ì¡°

ëª¨ë“  API ì‘ë‹µì€ ë‹¤ìŒ 5ê°œ ë¸”ë¡ìœ¼ë¡œ êµ¬ì„±ëœë‹¤:

```json
{
  "meta": {
    "response_type": "string",
    "confidence_level": "document-based",
    "premium_notice": false,
    "generated_at": "ISO8601 timestamp"
  },
  "query_summary": {
    "original_query": "string",
    "interpreted_intent": "string",
    "target_insurers": ["string"],
    "target_products": [
      {
        "insurer": "string",
        "product_name": "string"
      }
    ]
  },
  "comparison": {
    "dimensions": [
      {
        "key": "string",
        "label": "string",
        "type": "boolean | amount | text"
      }
    ],
    "products": [
      {
        "insurer": "string",
        "product_name": "string",
        "rows": {
          "<dimension_key>": {
            "value": "any",
            "evidence": "string (ë¬¸ì„œ ì¶œì²˜)"
          }
        }
      }
    ]
  },
  "notes": {
    "summary": "string",
    "details": ["string"]
  },
  "limitations": ["string"]
}
```

### 1.2 ë¸”ë¡ë³„ ì±…ì„ (Responsibility)

| ë¸”ë¡ | ëª©ì  | UI ë Œë”ë§ |
|---|---|---|
| `meta` | ì‘ë‹µ ì„±ê²©, ê²½ê³  í”Œë˜ê·¸ | ìƒë‹¨ ê²½ê³  ë°°ë„ˆ |
| `query_summary` | ì§ˆë¬¸ í•´ì„ ê²°ê³¼ | íšŒì‚¬ëª…+ìƒí’ˆëª… í‘œì‹œ |
| `comparison` | ì‹¤ì œ ë¹„êµ ë°ì´í„° | í…Œì´ë¸”/ì¹´ë“œ í˜•ì‹ |
| `notes` | ì‚¬ëŒì´ ì½ëŠ” ë³´ì¶© ì„¤ëª… | ì ‘ê¸°/í¼ì¹˜ê¸° ì˜ì—­ |
| `limitations` | ì‹œìŠ¤í…œ í•œê³„ ëª…ì‹œ | í•˜ë‹¨ ì‘ì€ ê¸€ì”¨ |

### 1.3 ì ˆëŒ€ ê·œì¹™ (Absolute Rules)

#### âœ… í—ˆìš©
- ë¬¸ì„œ ê¸°ë°˜ ì‚¬ì‹¤ ë¹„êµ
- "í™•ì¸ ë¶ˆê°€" ëª…ì‹œ
- íšŒì‚¬ëª… + ìƒí’ˆëª… ë³‘ê¸°
- Evidence ì¶œì²˜ í‘œì‹œ

#### âŒ ê¸ˆì§€
- ë³´í—˜ ì¶”ì²œ
- ê°œì¸ ë§ì¶¤ ê³„ì‚°
- ë¬¸ì„œì— ì—†ëŠ” í•´ì„
- ìš°ì—´ íŒë‹¨ ("ìœ ë¦¬", "ë¶ˆë¦¬")
- "ì¢…í•© ì˜ê²¬", "ì œì•ˆ" ë“±

---

## 2. ê³ ê° ì˜ˆì œë³„ ì‘ë‹µ í…œí”Œë¦¿

### 2.1 ì˜ˆì œ 1ë²ˆ: ë³´ì¥ ì—¬ë¶€ í™•ì¸

#### ê³ ê° ì§ˆë¬¸
```
"ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜ì€ ì•” ì§„ë‹¨ ì‹œ ë³´ì¥ë˜ë‚˜ìš”?"
```

#### JSON ì‘ë‹µ
```json
{
  "meta": {
    "response_type": "existence_check",
    "confidence_level": "document-based",
    "premium_notice": false,
    "generated_at": "2025-12-28T10:00:00+09:00"
  },
  "query_summary": {
    "original_query": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜ì€ ì•” ì§„ë‹¨ ì‹œ ë³´ì¥ë˜ë‚˜ìš”?",
    "interpreted_intent": "ë³´ì¥ ì—¬ë¶€ í™•ì¸",
    "target_insurers": ["ì‚¼ì„±ìƒëª…"],
    "target_products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜"
      }
    ]
  },
  "comparison": {
    "dimensions": [
      {
        "key": "cancer_coverage",
        "label": "ì•” ë³´ì¥",
        "type": "boolean"
      },
      {
        "key": "coverage_amount",
        "label": "ë³´ì¥ ê¸ˆì•¡",
        "type": "amount"
      }
    ],
    "products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "cancer_coverage": {
            "value": true,
            "evidence": "ì•½ê´€ p.12"
          },
          "coverage_amount": {
            "value": "3,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3"
          }
        }
      }
    ]
  },
  "notes": {
    "summary": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜ì€ ì•” ì§„ë‹¨ ì‹œ 3,000ë§Œì›ì„ ë³´ì¥í•©ë‹ˆë‹¤.",
    "details": [
      "ì¼ë°˜ì•” ê¸°ì¤€ì´ë©°, ìœ ì‚¬ì•”ì€ ë³„ë„ ì¡°ê±´ì…ë‹ˆë‹¤.",
      "ëŒ€ê¸°ê¸°ê°„ ë° ê°ì•¡ê¸°ê°„ì´ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    ]
  },
  "limitations": [
    "ë³¸ ì •ë³´ëŠ” ì•½ê´€ ë° ê°€ì…ì„¤ê³„ì„œì— ê¸°ë°˜í•œ ì‚¬ì‹¤ í™•ì¸ì…ë‹ˆë‹¤.",
    "ê°œì¸ë³„ ì¡°ê±´ì— ë”°ë¼ ë³´ì¥ ë‚´ìš©ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
  ]
}
```

#### UI ë Œë”ë§ ê°€ì´ë“œ
- ê°„ê²°í•œ O/X ì¹´ë“œ
- ë³´ì¥ ê¸ˆì•¡ ê°•ì¡°
- Evidence ì¶œì²˜ëŠ” ì‘ì€ ê¸€ì”¨ë¡œ í•˜ë‹¨ í‘œì‹œ

---

### 2.2 ì˜ˆì œ 2ë²ˆ: íŠ¹ì • ë‹´ë³´ ë¹„êµ

#### ê³ ê° ì§ˆë¬¸
```
"ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª…ì˜ ì•” ì§„ë‹¨ë¹„ë¥¼ ë¹„êµí•´ì¤˜"
```

#### JSON ì‘ë‹µ
```json
{
  "meta": {
    "response_type": "comparison",
    "confidence_level": "document-based",
    "premium_notice": false,
    "generated_at": "2025-12-28T10:00:00+09:00"
  },
  "query_summary": {
    "original_query": "ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª…ì˜ ì•” ì§„ë‹¨ë¹„ë¥¼ ë¹„êµí•´ì¤˜",
    "interpreted_intent": "íŠ¹ì • ë‹´ë³´ ë¹„êµ",
    "target_insurers": ["ì‚¼ì„±ìƒëª…", "í•œí™”ìƒëª…"],
    "target_products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜"
      },
      {
        "insurer": "í•œí™”ìƒëª…",
        "product_name": "í•œí™”ìƒëª… ê±´ê°•ë³´í—˜"
      }
    ]
  },
  "comparison": {
    "dimensions": [
      {
        "key": "coverage_exists",
        "label": "ë³´ì¥ ì—¬ë¶€",
        "type": "boolean"
      },
      {
        "key": "coverage_amount",
        "label": "ë³´ì¥ ê¸ˆì•¡",
        "type": "amount"
      },
      {
        "key": "waiting_period",
        "label": "ëŒ€ê¸°ê¸°ê°„",
        "type": "text"
      },
      {
        "key": "reduction_period",
        "label": "ê°ì•¡ê¸°ê°„",
        "type": "text"
      },
      {
        "key": "excluded_cancer",
        "label": "ì œì™¸ ì•”ì¢…",
        "type": "text"
      }
    ],
    "products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "coverage_exists": {
            "value": true,
            "evidence": "ì•½ê´€ p.12"
          },
          "coverage_amount": {
            "value": "3,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3"
          },
          "waiting_period": {
            "value": "90ì¼",
            "evidence": "ì•½ê´€ p.15"
          },
          "reduction_period": {
            "value": "1ë…„ (50% ì§€ê¸‰)",
            "evidence": "ì•½ê´€ p.15"
          },
          "excluded_cancer": {
            "value": "ìœ ì‚¬ì•” (ê¸°íƒ€í”¼ë¶€ì•”, ê°‘ìƒì„ ì•” ë“±)",
            "evidence": "ì•½ê´€ p.13"
          }
        }
      },
      {
        "insurer": "í•œí™”ìƒëª…",
        "product_name": "í•œí™”ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "coverage_exists": {
            "value": true,
            "evidence": "ì•½ê´€ p.20"
          },
          "coverage_amount": {
            "value": "5,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2"
          },
          "waiting_period": {
            "value": "90ì¼",
            "evidence": "ì•½ê´€ p.22"
          },
          "reduction_period": {
            "value": "1ë…„ (50% ì§€ê¸‰)",
            "evidence": "ì•½ê´€ p.22"
          },
          "excluded_cancer": {
            "value": "ìœ ì‚¬ì•” (ê¸°íƒ€í”¼ë¶€ì•”, ê°‘ìƒì„ ì•”, ëŒ€ì¥ì ë§‰ë‚´ì•”, ì œìë¦¬ì•”, ê²½ê³„ì„±ì¢…ì–‘)",
            "evidence": "ì•½ê´€ p.21"
          }
        }
      }
    ]
  },
  "notes": {
    "summary": "ë‘ ìƒí’ˆ ëª¨ë‘ ì•” ì§„ë‹¨ë¹„ë¥¼ ë³´ì¥í•˜ë©°, ëŒ€ê¸°ê¸°ê°„ê³¼ ê°ì•¡ê¸°ê°„ì€ ë™ì¼í•©ë‹ˆë‹¤.",
    "details": [
      "ì‚¼ì„±ìƒëª…ì€ 3,000ë§Œì›, í•œí™”ìƒëª…ì€ 5,000ë§Œì›ì„ ì§€ê¸‰í•©ë‹ˆë‹¤.",
      "í•œí™”ìƒëª…ì˜ ì œì™¸ ì•”ì¢…ì´ ë” ìƒì„¸í•˜ê²Œ ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
      "ì‹¤ì œ ì§€ê¸‰ ì¡°ê±´ì€ ì•½ê´€ ì „ë¬¸ì„ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤."
    ]
  },
  "limitations": [
    "ë³¸ ë¹„êµëŠ” ì•½ê´€ ë° ê°€ì…ì„¤ê³„ì„œì— ê¸°ë°˜í•œ ì •ë³´ ì œê³µì…ë‹ˆë‹¤.",
    "ê°œì¸ ì¡°ê±´ì— ë”°ë¥¸ ë³´í—˜ë£Œ ê³„ì‚°ì€ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
    "ìƒí’ˆ ì¶”ì²œì´ë‚˜ ê°€ì… íŒë‹¨ì„ ëŒ€ì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
  ]
}
```

#### UI ë Œë”ë§ ê°€ì´ë“œ
- ê°€ë¡œ ìŠ¤í¬ë¡¤ í…Œì´ë¸” (ëª¨ë°”ì¼ ëŒ€ì‘)
- ì°¨ì´ë‚˜ëŠ” í•­ëª© í•˜ì´ë¼ì´íŠ¸ (ìƒ‰ìƒ X, ë³¼ë“œì²´ë§Œ)
- Evidence ì¶œì²˜ëŠ” ê° ì…€ í•˜ë‹¨ì— ì‘ê²Œ í‘œì‹œ

---

### 2.3 ì˜ˆì œ 3ë²ˆ: ìƒí’ˆ ì¢…í•© ë¹„êµ â­ï¸ **ìµœìš°ì„  ë°˜ì˜** â­ï¸

#### ê³ ê° ì§ˆë¬¸
```
"ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ì„ ë¹„êµí•´ì¤˜"
```

#### JSON ì‘ë‹µ
```json
{
  "meta": {
    "response_type": "comparison",
    "confidence_level": "document-based",
    "premium_notice": false,
    "generated_at": "2025-12-28T10:00:00+09:00"
  },
  "query_summary": {
    "original_query": "ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ì„ ë¹„êµí•´ì¤˜",
    "interpreted_intent": "ìƒí’ˆ ì¢…í•© ë¹„êµ",
    "target_insurers": ["ì‚¼ì„±ìƒëª…", "í•œí™”ìƒëª…"],
    "target_products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜"
      },
      {
        "insurer": "í•œí™”ìƒëª…",
        "product_name": "í•œí™”ìƒëª… ê±´ê°•ë³´í—˜"
      }
    ]
  },
  "comparison": {
    "dimensions": [
      {
        "key": "cancer_diagnosis",
        "label": "ì•” ì§„ë‹¨ë¹„",
        "type": "amount"
      },
      {
        "key": "similar_cancer_diagnosis",
        "label": "ìœ ì‚¬ì•” ì§„ë‹¨ë¹„",
        "type": "amount"
      },
      {
        "key": "stroke_diagnosis",
        "label": "ë‡Œì¶œí˜ˆ ì§„ë‹¨ë¹„",
        "type": "amount"
      },
      {
        "key": "heart_disease_diagnosis",
        "label": "ê¸‰ì„±ì‹¬ê·¼ê²½ìƒ‰ ì§„ë‹¨ë¹„",
        "type": "amount"
      },
      {
        "key": "hospitalization_daily",
        "label": "ì…ì›ì¼ë‹¹ (ì§ˆë³‘)",
        "type": "amount"
      },
      {
        "key": "surgery_benefit",
        "label": "ìˆ˜ìˆ ë¹„ (ì§ˆë³‘)",
        "type": "amount"
      },
      {
        "key": "death_benefit_disease",
        "label": "ì‚¬ë§ë³´í—˜ê¸ˆ (ì§ˆë³‘)",
        "type": "amount"
      },
      {
        "key": "death_benefit_accident",
        "label": "ì‚¬ë§ë³´í—˜ê¸ˆ (ìƒí•´)",
        "type": "amount"
      },
      {
        "key": "disability_benefit",
        "label": "í›„ìœ ì¥í•´",
        "type": "text"
      }
    ],
    "products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "cancer_diagnosis": {
            "value": "3,000ë§Œì› (ì¼ë°˜ì•”)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.12"
          },
          "similar_cancer_diagnosis": {
            "value": "300ë§Œì› (ê¸°íƒ€í”¼ë¶€ì•”), 600ë§Œì› (ê°‘ìƒì„ ì•”)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.13"
          },
          "stroke_diagnosis": {
            "value": "1,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.18"
          },
          "heart_disease_diagnosis": {
            "value": "1,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.20"
          },
          "hospitalization_daily": {
            "value": "5ë§Œì› (1ì¼ë‹¹)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.4, ì•½ê´€ p.25"
          },
          "surgery_benefit": {
            "value": "ìˆ˜ìˆ  ì¢…ë¥˜ë³„ ì°¨ë“± (10ë§Œì›~500ë§Œì›)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.4, ì•½ê´€ p.27"
          },
          "death_benefit_disease": {
            "value": "1,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.5"
          },
          "death_benefit_accident": {
            "value": "5,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.5"
          },
          "disability_benefit": {
            "value": "3~100% (ì¥í•´ë“±ê¸‰ë³„ ì°¨ë“±)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.8"
          }
        }
      },
      {
        "insurer": "í•œí™”ìƒëª…",
        "product_name": "í•œí™”ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "cancer_diagnosis": {
            "value": "5,000ë§Œì› (ì¼ë°˜ì•”)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.20"
          },
          "similar_cancer_diagnosis": {
            "value": "500ë§Œì› (ìœ ì‚¬ì•” í†µí•©)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.21"
          },
          "stroke_diagnosis": {
            "value": "1,500ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.30"
          },
          "heart_disease_diagnosis": {
            "value": "1,500ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.32"
          },
          "hospitalization_daily": {
            "value": "3ë§Œì› (1ì¼ë‹¹)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.40"
          },
          "surgery_benefit": {
            "value": "ìˆ˜ìˆ  ì¢…ë¥˜ë³„ ì°¨ë“± (20ë§Œì›~300ë§Œì›)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.3, ì•½ê´€ p.42"
          },
          "death_benefit_disease": {
            "value": "500ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.10"
          },
          "death_benefit_accident": {
            "value": "3,000ë§Œì›",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.10"
          },
          "disability_benefit": {
            "value": "3~100% (ì¥í•´ë“±ê¸‰ë³„ ì°¨ë“±)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.2, ì•½ê´€ p.15"
          }
        }
      }
    ]
  },
  "notes": {
    "summary": "ë‘ ìƒí’ˆ ëª¨ë‘ ì•”, ë‡Œì¡¸ì¤‘, ì‹¬ì¥ì§ˆí™˜, ì…ì›, ìˆ˜ìˆ , ì‚¬ë§, í›„ìœ ì¥í•´ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.",
    "details": [
      "ì•” ì§„ë‹¨ë¹„: í•œí™”ìƒëª…ì´ 5,000ë§Œì›ìœ¼ë¡œ ë” ë†’ìŠµë‹ˆë‹¤ (ì‚¼ì„±ìƒëª… 3,000ë§Œì›).",
      "ìœ ì‚¬ì•” ì§„ë‹¨ë¹„: í•œí™”ìƒëª…ì€ í†µí•© ì§€ê¸‰ (500ë§Œì›), ì‚¼ì„±ìƒëª…ì€ ì•”ì¢…ë³„ ì°¨ë“± ì§€ê¸‰.",
      "ë‡Œì¶œí˜ˆ/ê¸‰ì„±ì‹¬ê·¼ê²½ìƒ‰ ì§„ë‹¨ë¹„: í•œí™”ìƒëª…ì´ ê° 1,500ë§Œì›ìœ¼ë¡œ ë” ë†’ìŠµë‹ˆë‹¤ (ì‚¼ì„±ìƒëª… ê° 1,000ë§Œì›).",
      "ì…ì›ì¼ë‹¹: ì‚¼ì„±ìƒëª…ì´ 5ë§Œì›ìœ¼ë¡œ ë” ë†’ìŠµë‹ˆë‹¤ (í•œí™”ìƒëª… 3ë§Œì›).",
      "ìˆ˜ìˆ ë¹„: ë‘ ìƒí’ˆ ëª¨ë‘ ìˆ˜ìˆ  ì¢…ë¥˜ë³„ ì°¨ë“± ì§€ê¸‰ì´ë©°, ë²”ìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤.",
      "ì‚¬ë§ë³´í—˜ê¸ˆ: ì§ˆë³‘ ì‚¬ë§ì€ ì‚¼ì„±ìƒëª…ì´ ë” ë†’ê³  (1,000ë§Œì› vs 500ë§Œì›), ìƒí•´ ì‚¬ë§ì€ ì‚¼ì„±ìƒëª…ì´ ë” ë†’ìŠµë‹ˆë‹¤ (5,000ë§Œì› vs 3,000ë§Œì›).",
      "í›„ìœ ì¥í•´: ë‘ ìƒí’ˆ ëª¨ë‘ ë™ì¼í•œ ì¥í•´ë“±ê¸‰ ì²´ê³„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤."
    ]
  },
  "limitations": [
    "ë³¸ ë¹„êµëŠ” ì•½ê´€ ë° ê°€ì…ì„¤ê³„ì„œì— ê¸°ë°˜í•œ ì •ë³´ ì œê³µì…ë‹ˆë‹¤.",
    "ëŒ€ê¸°ê¸°ê°„, ê°ì•¡ê¸°ê°„, ë©´ì±…ì‚¬í•­ ë“± ì„¸ë¶€ ì¡°ê±´ì€ ì•½ê´€ì„ ì§ì ‘ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.",
    "ê°œì¸ ì¡°ê±´ì— ë”°ë¥¸ ë³´í—˜ë£Œ ê³„ì‚°ì€ í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
    "ìƒí’ˆ ì¶”ì²œì´ë‚˜ ê°€ì… íŒë‹¨ì„ ëŒ€ì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
    "ë³´ì¥ ë‚´ìš©ì€ ê°€ì… ì‹œì  ë° íŠ¹ì•½ êµ¬ì„±ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
  ]
}
```

#### UI ë Œë”ë§ ê°€ì´ë“œ (ì˜ˆì œ 3ë²ˆ ì „ìš©)

**ë ˆì´ì•„ì›ƒ êµ¬ì¡°** (ChatGPT ìŠ¤íƒ€ì¼):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì§ˆë¬¸: ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ì„ ë¹„êµí•´ì¤˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ë¹„êµ ëŒ€ìƒ ìƒí’ˆ                        â”‚
â”‚  â€¢ ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜                      â”‚
â”‚  â€¢ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š ë³´ì¥ ë¹„êµí‘œ                           â”‚
â”‚                                          â”‚
â”‚  [ê°€ë¡œ ìŠ¤í¬ë¡¤ í…Œì´ë¸”]                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ë‹´ë³´     â”‚ ì‚¼ì„±ìƒëª… â”‚ í•œí™”ìƒëª… â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ ì•”ì§„ë‹¨ë¹„ â”‚ 3,000ë§Œì›â”‚ 5,000ë§Œì›â”‚     â”‚
â”‚  â”‚          â”‚ ê°€ì…p.3  â”‚ ê°€ì…p.2  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  ... (9ê°œ ë‹´ë³´ ì „ì²´ í‘œì‹œ)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ìš”ì•½                                  â”‚
â”‚  ë‘ ìƒí’ˆ ëª¨ë‘ ì•”, ë‡Œì¡¸ì¤‘, ì‹¬ì¥ì§ˆí™˜...     â”‚
â”‚                                          â”‚
â”‚  [í¼ì¹˜ê¸°] ìƒì„¸ ë‚´ìš© 7ê°œ í•­ëª©              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ ì£¼ì˜ì‚¬í•­                              â”‚
â”‚  [ì ‘ê¸°/í¼ì¹˜ê¸°]                            â”‚
â”‚  â€¢ ë³¸ ë¹„êµëŠ” ì•½ê´€ ë° ê°€ì…ì„¤ê³„ì„œ...        â”‚
â”‚  â€¢ ê°œì¸ ì¡°ê±´ì— ë”°ë¥¸ ë³´í—˜ë£Œ ê³„ì‚°...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**UI ê·œì¹™**:
- íšŒì‚¬ëª… + ìƒí’ˆëª…ì€ í•­ìƒ í•¨ê»˜ í‘œì‹œ
- í…Œì´ë¸”ì€ ëª¨ë°”ì¼ì—ì„œ ê°€ë¡œ ìŠ¤í¬ë¡¤
- Evidence ì¶œì²˜ëŠ” ê° ì…€ í•˜ë‹¨ì— ì‘ê²Œ í‘œì‹œ
- `notes.details` ëŠ” ì ‘ê¸°/í¼ì¹˜ê¸° ê¸°ë³¸ ìƒíƒœë¡œ ìˆ¨ê¹€
- `limitations` ëŠ” í•­ìƒ í•˜ë‹¨ì— í‘œì‹œ

---

### 2.4 ì˜ˆì œ 4ë²ˆ: ë³´í—˜ë£Œ ë¹„êµ (ì œí•œì  ì§€ì›)

#### ê³ ê° ì§ˆë¬¸
```
"ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ ë³´í—˜ë£Œë¥¼ ë¹„êµí•´ì¤˜"
```

#### JSON ì‘ë‹µ
```json
{
  "meta": {
    "response_type": "comparison",
    "confidence_level": "document-based",
    "premium_notice": true,
    "generated_at": "2025-12-28T10:00:00+09:00"
  },
  "query_summary": {
    "original_query": "ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ ë³´í—˜ë£Œë¥¼ ë¹„êµí•´ì¤˜",
    "interpreted_intent": "ë³´í—˜ë£Œ ë¹„êµ",
    "target_insurers": ["ì‚¼ì„±ìƒëª…", "í•œí™”ìƒëª…"],
    "target_products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜"
      },
      {
        "insurer": "í•œí™”ìƒëª…",
        "product_name": "í•œí™”ìƒëª… ê±´ê°•ë³´í—˜"
      }
    ]
  },
  "comparison": {
    "dimensions": [
      {
        "key": "monthly_premium",
        "label": "ì›” ë³´í—˜ë£Œ (ì°¸ê³ )",
        "type": "amount"
      },
      {
        "key": "premium_conditions",
        "label": "ë³´í—˜ë£Œ ì‚°ì¶œ ì¡°ê±´",
        "type": "text"
      }
    ],
    "products": [
      {
        "insurer": "ì‚¼ì„±ìƒëª…",
        "product_name": "ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "monthly_premium": {
            "value": "ì•½ 50,000ì› (ì˜ˆì‹œ)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.1 (íŠ¹ì • ì¡°ê±´ ê¸°ì¤€)"
          },
          "premium_conditions": {
            "value": "30ì„¸ ë‚¨ì„±, í‘œì¤€ì²´, 20ë…„ ë‚©ì… ê¸°ì¤€",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.1"
          }
        }
      },
      {
        "insurer": "í•œí™”ìƒëª…",
        "product_name": "í•œí™”ìƒëª… ê±´ê°•ë³´í—˜",
        "rows": {
          "monthly_premium": {
            "value": "ì•½ 45,000ì› (ì˜ˆì‹œ)",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.1 (íŠ¹ì • ì¡°ê±´ ê¸°ì¤€)"
          },
          "premium_conditions": {
            "value": "30ì„¸ ë‚¨ì„±, í‘œì¤€ì²´, 20ë…„ ë‚©ì… ê¸°ì¤€",
            "evidence": "ê°€ì…ì„¤ê³„ì„œ p.1"
          }
        }
      }
    ]
  },
  "notes": {
    "summary": "ë³´í—˜ë£ŒëŠ” ê°œì¸ë³„ ì¡°ê±´ì— ë”°ë¼ í¬ê²Œ ë‹¬ë¼ì§‘ë‹ˆë‹¤.",
    "details": [
      "í‘œì‹œëœ ë³´í—˜ë£ŒëŠ” íŠ¹ì • ì¡°ê±´ (30ì„¸ ë‚¨ì„±, í‘œì¤€ì²´, 20ë…„ ë‚©ì…) ê¸°ì¤€ ì˜ˆì‹œì…ë‹ˆë‹¤.",
      "ì‹¤ì œ ë³´í—˜ë£ŒëŠ” ë‚˜ì´, ì„±ë³„, ê±´ê°•ìƒíƒœ, ë‚©ì…ê¸°ê°„, íŠ¹ì•½ êµ¬ì„± ë“±ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.",
      "ì •í™•í•œ ë³´í—˜ë£ŒëŠ” ë³´í—˜ì‚¬ ë˜ëŠ” ì„¤ê³„ì‚¬ë¥¼ í†µí•´ ì§ì ‘ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤."
    ]
  },
  "limitations": [
    "âš ï¸ ë³¸ ì‹œìŠ¤í…œì€ ê°œì¸ë³„ ë³´í—˜ë£Œ ê³„ì‚° ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
    "âš ï¸ í‘œì‹œëœ ë³´í—˜ë£ŒëŠ” ë¬¸ì„œìƒ ì˜ˆì‹œì´ë©°, ì‹¤ì œ ê°€ì… ë³´í—˜ë£Œì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ë³¸ ë¹„êµëŠ” ì•½ê´€ ë° ê°€ì…ì„¤ê³„ì„œì— ê¸°ë°˜í•œ ì •ë³´ ì œê³µì…ë‹ˆë‹¤.",
    "ìƒí’ˆ ì¶”ì²œì´ë‚˜ ê°€ì… íŒë‹¨ì„ ëŒ€ì‹ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
  ]
}
```

#### UI ë Œë”ë§ ê°€ì´ë“œ (ì˜ˆì œ 4ë²ˆ ì „ìš©)

**í•„ìˆ˜ ìš”êµ¬ì‚¬í•­**:
- `meta.premium_notice === true` ì´ë©´ ìƒë‹¨ì— ë…¸ë€ìƒ‰ ê²½ê³  ë°•ìŠ¤ í‘œì‹œ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ë³´í—˜ë£Œ ì•ˆë‚´                            â”‚
â”‚                                          â”‚
â”‚ ë³´í—˜ë£ŒëŠ” ê°œì¸ë³„ ì¡°ê±´ (ë‚˜ì´, ì„±ë³„, ê±´ê°•ìƒíƒœ ë“±)ì— â”‚
â”‚ ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤. ë³¸ ì‹œìŠ¤í…œì€ ê°œì¸ë³„ ë³´í—˜ë£Œ   â”‚
â”‚ ê³„ì‚° ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•Šìœ¼ë©°, ë¬¸ì„œìƒ ì˜ˆì‹œë§Œ   â”‚
â”‚ í‘œì‹œí•©ë‹ˆë‹¤.                               â”‚
â”‚                                          â”‚
â”‚ ì •í™•í•œ ë³´í—˜ë£ŒëŠ” ë³´í—˜ì‚¬ ë˜ëŠ” ì„¤ê³„ì‚¬ë¥¼ í†µí•´    â”‚
â”‚ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì²« í™”ë©´ UX (ChatGPT ìŠ¤íƒ€ì¼)

### 3.1 í™”ë©´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                   â”‚
â”‚        ğŸ’¬ ë³´í—˜ ìƒí’ˆ ë¹„êµ ë„ìš°ë¯¸                    â”‚
â”‚                                                   â”‚
â”‚   ì €ëŠ” ë³´í—˜ ì•½ê´€ê³¼ ê°€ì…ì„¤ê³„ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ          â”‚
â”‚   ê°ê´€ì ì¸ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.                     â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ì œê°€ í•  ìˆ˜ ìˆëŠ” ê²ƒ                             â”‚
â”‚  â€¢ ì—¬ëŸ¬ ë³´í—˜ì‚¬ ìƒí’ˆì˜ ë³´ì¥ ë‚´ìš© ë¹„êµ               â”‚
â”‚  â€¢ íŠ¹ì • ë‹´ë³´ (ì•”, ë‡Œì¡¸ì¤‘ ë“±) ë³´ì¥ ì—¬ë¶€ í™•ì¸        â”‚
â”‚  â€¢ ë¬¸ì„œ ê¸°ë°˜ ì‚¬ì‹¤ ì •ë³´ ì œê³µ (ì¶œì²˜ ëª…ì‹œ)            â”‚
â”‚                                                   â”‚
â”‚  âŒ ì œê°€ í•  ìˆ˜ ì—†ëŠ” ê²ƒ                             â”‚
â”‚  â€¢ ê°œì¸ ë§ì¶¤ ìƒí’ˆ ì¶”ì²œ                            â”‚
â”‚  â€¢ ê°œì¸ë³„ ë³´í—˜ë£Œ ê³„ì‚°                             â”‚
â”‚  â€¢ ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš© ì¶”ë¡  ë˜ëŠ” í•´ì„                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Œ ì´ë ‡ê²Œ ì§ˆë¬¸í•´ë³´ì„¸ìš”                            â”‚
â”‚                                                   â”‚
â”‚  [ë²„íŠ¼] ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ì„ ë¹„êµí•´ì¤˜    â”‚
â”‚  [ë²„íŠ¼] ë©”ë¦¬ì¸ í™”ì¬ ì•” ì§„ë‹¨ë¹„ê°€ ì–¼ë§ˆì¸ê°€ìš”?         â”‚
â”‚  [ë²„íŠ¼] DBì†í•´ë³´í—˜ì€ ë‡Œì¶œí˜ˆ ë³´ì¥ë˜ë‚˜ìš”?            â”‚
â”‚  [ë²„íŠ¼] 3ê°œ íšŒì‚¬ ì…ì›ì¼ë‹¹ ë¹„êµ                    â”‚
â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”...                          â”‚
â”‚                                                   â”‚
â”‚  [í…ìŠ¤íŠ¸ ì…ë ¥ì°½]                                  â”‚
â”‚                                                   â”‚
â”‚  [ì „ì†¡ ë²„íŠ¼]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 í•„ìˆ˜ í‘œì‹œ ì‚¬í•­

#### ì‹œìŠ¤í…œ ì†Œê°œ ë¬¸êµ¬
```
ì €ëŠ” ë³´í—˜ ì•½ê´€ê³¼ ê°€ì…ì„¤ê³„ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°ê´€ì ì¸ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
ê°œì¸ ë§ì¶¤ ì¶”ì²œì´ë‚˜ ë³´í—˜ë£Œ ê³„ì‚°ì€ ì œê³µí•˜ì§€ ì•Šìœ¼ë©°,
ë¬¸ì„œì— ëª…ì‹œëœ ì‚¬ì‹¤ë§Œ ë¹„êµí•©ë‹ˆë‹¤.
```

#### í•  ìˆ˜ ìˆëŠ” ê²ƒ
- ì—¬ëŸ¬ ë³´í—˜ì‚¬ ìƒí’ˆì˜ ë³´ì¥ ë‚´ìš© ë¹„êµ
- íŠ¹ì • ë‹´ë³´ (ì•”, ë‡Œì¡¸ì¤‘ ë“±) ë³´ì¥ ì—¬ë¶€ í™•ì¸
- ë¬¸ì„œ ê¸°ë°˜ ì‚¬ì‹¤ ì •ë³´ ì œê³µ (ì¶œì²˜ ëª…ì‹œ)
- **íšŒì‚¬ëª… + ìƒí’ˆëª… í•¨ê»˜ í‘œì‹œ**

#### í•  ìˆ˜ ì—†ëŠ” ê²ƒ
- ê°œì¸ ë§ì¶¤ ìƒí’ˆ ì¶”ì²œ
- ê°œì¸ë³„ ë³´í—˜ë£Œ ê³„ì‚°
- ë¬¸ì„œì— ì—†ëŠ” ë‚´ìš© ì¶”ë¡  ë˜ëŠ” í•´ì„
- "ì–´ë–¤ ìƒí’ˆì´ ì¢‹ì€ì§€" íŒë‹¨

#### ì˜ˆì‹œ ì§ˆë¬¸ ë²„íŠ¼ (4ê°œ)
1. "ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ì„ ë¹„êµí•´ì¤˜" (ì˜ˆì œ 3ë²ˆ)
2. "ë©”ë¦¬ì¸ í™”ì¬ ì•” ì§„ë‹¨ë¹„ê°€ ì–¼ë§ˆì¸ê°€ìš”?" (ì˜ˆì œ 1ë²ˆ)
3. "DBì†í•´ë³´í—˜ì€ ë‡Œì¶œí˜ˆ ë³´ì¥ë˜ë‚˜ìš”?" (ì˜ˆì œ 1ë²ˆ)
4. "3ê°œ íšŒì‚¬ ì…ì›ì¼ë‹¹ ë¹„êµ" (ì˜ˆì œ 2ë²ˆ)

### 3.3 ì‘ë‹µ í›„ UI íë¦„

ì‚¬ìš©ì ì§ˆë¬¸ ì…ë ¥ â†’ API í˜¸ì¶œ â†’ ì‘ë‹µ ë Œë”ë§:

```
[ì‚¬ìš©ì ì§ˆë¬¸ ë§í’ì„ ]
ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ì„ ë¹„êµí•´ì¤˜

[ì‹œìŠ¤í…œ ì‘ë‹µ ë§í’ì„ ]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ ë¹„êµ ëŒ€ìƒ ìƒí’ˆ                     â”‚
â”‚ â€¢ ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜                   â”‚
â”‚ â€¢ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ë³´ì¥ ë¹„êµí‘œ                        â”‚
â”‚ [í…Œì´ë¸” ë Œë”ë§]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ ìš”ì•½                               â”‚
â”‚ ë‘ ìƒí’ˆ ëª¨ë‘ ì•”, ë‡Œì¡¸ì¤‘, ì‹¬ì¥ì§ˆí™˜...   â”‚
â”‚ [í¼ì¹˜ê¸°] ìƒì„¸ ë‚´ìš©                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ì£¼ì˜ì‚¬í•­                           â”‚
â”‚ [ì ‘ê¸°/í¼ì¹˜ê¸°]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ì¶”ê°€ ì§ˆë¬¸ ì…ë ¥ì°½]
```

---

## 4. ì‹ ê·œ ìƒí’ˆ/íšŒì‚¬ ë“±ë¡ ì ˆì°¨ (SOP)

### 4.1 ëª©í‘œ

"8ê°œ íšŒì‚¬ ìƒí’ˆì´ ì „ë©´ ë³€ê²½ë˜ì–´ë„, ë¬´ì—‡ì„ í•˜ë©´ ë˜ëŠ”ì§€ í•œ ì¤„ë¡œ ì„¤ëª… ê°€ëŠ¥"

**í•œ ì¤„ ìš”ì•½**:
```
CSV ì—…ë°ì´íŠ¸ â†’ loader ì‹¤í–‰ â†’ ìë™ upsert â†’ UI ì˜í–¥ ì—†ìŒ
```

### 4.2 ìƒì„¸ ì ˆì°¨

#### STEP 1: ì›ì²œ ë°ì´í„° ìƒì„±
```bash
# ì‹ ê·œ ë³´í—˜ì‚¬ ë˜ëŠ” ìƒí’ˆ ë³€ê²½ ì‹œ
# 1. ê°€ì…ì„¤ê³„ì„œ PDF ìˆ˜ì§‘
data/sources/insurers/{insurer}/ê°€ì…ì„¤ê³„ì„œ/{íŒŒì¼ëª…}.pdf

# 2. Scope ì¶”ì¶œ (ìˆ˜ë™ ë˜ëŠ” ìë™)
data/scope/{insurer}_scope.csv

# 3. Evidence ì¶”ì¶œ (ìë™)
data/evidence_pack/{insurer}_evidence_pack.jsonl
```

**CSV ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ** (coverage_instance ê¸°ì¤€):
```csv
insurer,product_name,coverage_code,coverage_name_display,source_page
ì‚¼ì„±ìƒëª…,ì‚¼ì„±ìƒëª… ê±´ê°•ë³´í—˜,A4200_1,ì•”ì§„ë‹¨ë¹„(ìœ ì‚¬ì•”ì œì™¸),3
í•œí™”ìƒëª…,í•œí™”ìƒëª… ê±´ê°•ë³´í—˜,A4200_1,ì•”ì§„ë‹¨ë¹„(ìœ ì‚¬ì•”ì œì™¸),2
```

#### STEP 2: Metadata ë°˜ì˜
```bash
# ì‹ ê·œ ë³´í—˜ì‚¬ ì¶”ê°€ ì‹œ
docs/product/insurers.yml  # ë³´í—˜ì‚¬ ì •ë³´ ì¶”ê°€
docs/product/products.yml  # ìƒí’ˆ ì •ë³´ ì¶”ê°€

# ê¸°ì¡´ ìƒí’ˆ ë³€ê²½ ì‹œ
docs/product/products.yml  # display_name, summary ê°±ì‹ 
```

#### STEP 3: Loader ì‹¤í–‰
```bash
# Idempotent upsert ì‹¤í–‰
python -m pipeline.loader.load_all --insurer {insurer}

# ë˜ëŠ” ì „ì²´ ì¬ì ì¬
python -m pipeline.loader.reset_and_load_all
```

**Idempotent ë³´ì¥**:
- `instance_key` (insurer + product_name + coverage_code) ê¸°ë°˜ upsert
- `evidence_key` (insurer + product_name + coverage_code + doc_type + page) ê¸°ë°˜ upsert
- ë™ì¼ í‚¤ ì¬ì‹¤í–‰ ì‹œ ê²°ê³¼ ë¶ˆë³€

#### STEP 4: ê²€ì¦
```bash
# DB ìƒíƒœ í™•ì¸
psql -d insurance_db -c "SELECT insurer, COUNT(*) FROM coverage_instance GROUP BY insurer;"

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest tests/test_loader_idempotent.py -v

# API ì‘ë‹µ í™•ì¸
curl -X POST http://localhost:8000/api/compare \
  -H "Content-Type: application/json" \
  -d '{"query": "ì‚¼ì„±ìƒëª…ê³¼ í•œí™”ìƒëª… ê±´ê°•ë³´í—˜ ë¹„êµ"}'
```

#### STEP 5: UI ì˜í–¥ ë²”ìœ„ ì ê²€

**ìë™ ë°˜ì˜ (ì½”ë“œ ë³€ê²½ ë¶ˆí•„ìš”)**:
- âœ… ì‹ ê·œ ë³´í—˜ì‚¬ ì¶”ê°€
- âœ… ì‹ ê·œ ìƒí’ˆ ì¶”ê°€
- âœ… ê¸°ì¡´ ìƒí’ˆ ë³´ì¥ ê¸ˆì•¡ ë³€ê²½
- âœ… Evidence ì¶œì²˜ ë³€ê²½

**ìˆ˜ë™ ë°˜ì˜ í•„ìš”**:
- âš ï¸ `query_summary.target_products` ì—ì„œ product_name í‘œì‹œ í™•ì¸
- âš ï¸ ì²« í™”ë©´ ì˜ˆì‹œ ì§ˆë¬¸ ë²„íŠ¼ (ì„ íƒì  ê°±ì‹ )

### 4.3 ë¡¤ë°± ì ˆì°¨

```bash
# 1. CSV ì›ë³µ
git checkout HEAD -- data/scope/{insurer}_scope.csv

# 2. DB ì¬ì ì¬
python -m pipeline.loader.reset_and_load_all

# 3. ê²€ì¦
pytest tests/test_loader_idempotent.py -v
```

### 4.4 ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] CSV íŒŒì¼ ìƒì„±/ìˆ˜ì • ì™„ë£Œ
- [ ] metadata (insurers.yml, products.yml) ê°±ì‹ 
- [ ] Loader ì‹¤í–‰ (idempotent ê²€ì¦)
- [ ] pytest ì „ì²´ PASS
- [ ] API ì‘ë‹µ ìƒ˜í”Œ í™•ì¸ (ì˜ˆì œ 3ë²ˆ ê¸°ì¤€)
- [ ] UIì—ì„œ íšŒì‚¬ëª… + ìƒí’ˆëª… ì •ìƒ í‘œì‹œ í™•ì¸
- [ ] Evidence ì¶œì²˜ ë§í¬ ìœ íš¨ì„± í™•ì¸

---

## 5. ê¸ˆì§€ ì‚¬í•­ (Critical âŒ)

### 5.1 ì‘ë‹µ ë‚´ìš© ê¸ˆì§€ ì‚¬í•­

ë‹¤ìŒ í‘œí˜„ì€ ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€:

#### âŒ ì¶”ì²œ/íŒë‹¨ ê¸ˆì§€ì–´
- "ì¶”ì²œí•©ë‹ˆë‹¤"
- "ìœ ë¦¬í•©ë‹ˆë‹¤" / "ë¶ˆë¦¬í•©ë‹ˆë‹¤"
- "ì¢‹ìŠµë‹ˆë‹¤" / "ë‚˜ì©ë‹ˆë‹¤"
- "ì í•©í•©ë‹ˆë‹¤" / "ë¶€ì í•©í•©ë‹ˆë‹¤"
- "ì„ íƒí•˜ì„¸ìš”"
- "ê°€ì…í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤"

#### âŒ í•´ì„/ì¶”ë¡  ê¸ˆì§€ì–´
- "ì¢…í•©ì ìœ¼ë¡œ ë³´ë©´"
- "~ê²ƒìœ¼ë¡œ íŒë‹¨ë©ë‹ˆë‹¤"
- "~ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤"
- "~ê²ƒìœ¼ë¡œ ì¶”ì •ë©ë‹ˆë‹¤"
- "~ë¼ê³  ìƒê°ë©ë‹ˆë‹¤"

#### âŒ ê°œì¸í™” ê¸ˆì§€ì–´
- "ê·€í•˜ê»˜ ë§ëŠ”"
- "ê³ ê°ë‹˜ì—ê²Œ ì í•©í•œ"
- "ë§ì¶¤í˜•"
- "ìµœì ì˜"

### 5.2 ê¸°ìˆ ì  ê¸ˆì§€ ì‚¬í•­

#### âŒ Response êµ¬ì¡° ì„ì˜ ë³€ê²½ ê¸ˆì§€
- 5ê°œ ë¸”ë¡ êµ¬ì¡° ë³€ê²½ ê¸ˆì§€
- ì‹ ê·œ ë¸”ë¡ ì¶”ê°€ ê¸ˆì§€ (meta, query_summary, comparison, notes, limitations ì™¸)
- í•„ë“œ íƒ€ì… ë³€ê²½ ê¸ˆì§€

#### âŒ Evidence ì—†ëŠ” ê°’ ì œê³µ ê¸ˆì§€
- ëª¨ë“  `value` ëŠ” ë°˜ë“œì‹œ `evidence` ë™ë°˜
- Evidence ì—†ìœ¼ë©´ `"value": "í™•ì¸ ë¶ˆê°€"` + `"evidence": null`

#### âŒ UI êµ¬í˜„ ì½”ë“œ ì‘ì„± ê¸ˆì§€
- ë³¸ ë¬¸ì„œëŠ” êµ¬ì¡° ëª…ì„¸ë§Œ ì œê³µ
- React/Vue/HTML ì½”ë“œ ì‘ì„± ê¸ˆì§€
- CSS/ë””ìì¸ ëª…ì„¸ ê¸ˆì§€

---

## 6. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### 6.1 Response Schema Validation

ëª¨ë“  API ì‘ë‹µì€ ë‹¤ìŒì„ ë§Œì¡±í•´ì•¼ í•¨:

```python
def test_response_schema(response):
    assert "meta" in response
    assert "query_summary" in response
    assert "comparison" in response
    assert "notes" in response
    assert "limitations" in response

    assert response["meta"]["confidence_level"] == "document-based"

    for product in response["comparison"]["products"]:
        assert "insurer" in product
        assert "product_name" in product

        for row in product["rows"].values():
            assert "value" in row
            assert "evidence" in row or row["value"] == "í™•ì¸ ë¶ˆê°€"
```

### 6.2 Forbidden Words Test

```python
FORBIDDEN_WORDS = [
    "ì¶”ì²œ", "ìœ ë¦¬", "ë¶ˆë¦¬", "ì¢‹ìŠµë‹ˆë‹¤", "ë‚˜ì©ë‹ˆë‹¤",
    "ì í•©", "ì„ íƒ", "ì¢…í•©ì ìœ¼ë¡œ", "íŒë‹¨ë©ë‹ˆë‹¤",
    "ë§ì¶¤", "ìµœì "
]

def test_no_forbidden_words(response):
    response_text = json.dumps(response, ensure_ascii=False)

    for word in FORBIDDEN_WORDS:
        assert word not in response_text, f"ê¸ˆì§€ì–´ ë°œê²¬: {word}"
```

### 6.3 Evidence Requirement Test

```python
def test_evidence_required(response):
    for product in response["comparison"]["products"]:
        for dimension_key, row in product["rows"].items():
            if row["value"] != "í™•ì¸ ë¶ˆê°€":
                assert row["evidence"] is not None, \
                    f"Evidence ëˆ„ë½: {dimension_key}"
                assert len(row["evidence"]) > 0, \
                    f"Evidence ë¹ˆ ë¬¸ìì—´: {dimension_key}"
```

### 6.4 Company + Product Name Test

```python
def test_company_product_name_together(response):
    for product in response["query_summary"]["target_products"]:
        assert "insurer" in product
        assert "product_name" in product
        assert len(product["insurer"]) > 0
        assert len(product["product_name"]) > 0
```

---

## 7. ë³€ê²½ ì´ë ¥ (Change Log)

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© | ìŠ¹ì¸ì |
|---|---|---|---|
| 2025-12-28 | 1.0.0 | ì´ˆì•ˆ ì‘ì„± (STEP NEXT-2 ì™„ë£Œ) | - |

---

## 8. ë¶€ë¡

### 8.1 ì˜ˆì œ ì‘ë‹µ ì „ì²´ JSON (ì˜ˆì œ 3ë²ˆ)

ì „ì²´ JSONì€ ì„¹ì…˜ 2.3 ì°¸ì¡°.

### 8.2 ìš©ì–´ ì •ë¦¬

| ìš©ì–´ | ì •ì˜ |
|---|---|
| Response View Model | API â†’ UI ì‘ë‹µ êµ¬ì¡° ê³„ì•½ì„œ |
| Evidence | ë¬¸ì„œ ì¶œì²˜ (ì˜ˆ: "ì•½ê´€ p.12") |
| Dimension | ë¹„êµ ê¸°ì¤€ ì¶• (ì˜ˆ: "ì•” ì§„ë‹¨ë¹„") |
| Limitation | ì‹œìŠ¤í…œ í•œê³„ ëª…ì‹œ |
| Premium Notice | ë³´í—˜ë£Œ ê´€ë ¨ ê²½ê³  í”Œë˜ê·¸ |
| Idempotent Upsert | ë™ì¼ í‚¤ ì¬ì‹¤í–‰ ì‹œ ê²°ê³¼ ë¶ˆë³€ |

### 8.3 ì°¸ê³  ë¬¸ì„œ

- `docs/product/STEP_NEXT_1_RESPONSE_VIEW_MODEL.md` - Response View Model ëª…ì„¸ì„œ (ì´ˆì•ˆ)
- `schema/010_canonical.sql` - DB ìŠ¤í‚¤ë§ˆ
- `docs/product/products.yml` - ìƒí’ˆ ë©”íƒ€ë°ì´í„°
- `STATUS.md` - í˜„ì¬ íŒŒì´í”„ë¼ì¸ ì™„ë£Œ ìƒíƒœ

---

## 9. Definition of Done (DoD) ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Response JSON êµ¬ì¡° ê³ ì • (5ê°œ ë¸”ë¡)
- [x] ê³ ê° ì˜ˆì œ 1~4 ëª¨ë‘ ë°˜ì˜
- [x] ì˜ˆì œ 3ë²ˆ (ìƒí’ˆ ì¢…í•© ë¹„êµ) ê°€ì¥ ìƒì„¸í•˜ê²Œ ë°˜ì˜
- [x] ì²« í™”ë©´ UX ì„¤ëª… í¬í•¨ (ChatGPT ìŠ¤íƒ€ì¼)
- [x] ì‹ ê·œ ìƒí’ˆ ë“±ë¡ ì ˆì°¨ ëª…ë¬¸í™” (SOP)
- [x] ì¶”ì²œ/ì¶”ë¡  ë¬¸êµ¬ 0ê±´ (ê¸ˆì§€ì–´ ëª©ë¡ ëª…ì‹œ)
- [x] íšŒì‚¬ëª… + ìƒí’ˆëª… í•¨ê»˜ í‘œì‹œ ê·œì¹™ ëª…ì‹œ
- [x] Evidence ê¸°ë°˜ ì‘ë‹µ ê·œì¹™ ëª…ì‹œ
- [x] Premium notice ê²½ê³  UI ëª…ì‹œ
- [x] Idempotent loader ì—°ë™ ì ˆì°¨ í¬í•¨

---

**ë³¸ ë¬¸ì„œëŠ” UI ê°œë°œ ì°©ìˆ˜ ì „ ìµœì¢… í•©ì˜ ë¬¸ì„œë¡œ, ì„ì˜ ë³€ê²½ì„ ê¸ˆì§€í•œë‹¤.**
