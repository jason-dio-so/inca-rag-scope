# STEP 13 - Cancer Canonical Policy (질병코드 없이)

## 1. Scope

**적용 대상**: 암 담보 (A42 계열) ONLY

**비대상**: 기타 질병, 상해, 수술 일반 담보

## 2. Canonical 분해 원칙

### YES (분리한다)

| 분리 대상 | 이유 |
|---|---|
| 암진단비 vs 재진단암 | 지급 이벤트 다름 (최초 진단 vs 재진단) |
| 암진단비 vs 암치료비 | 지급 이벤트 다름 (진단 vs 치료) |
| 암진단비 vs 항암약물치료비 | 지급 이벤트 다름 (진단 vs 약물치료) |
| 암진단비 vs 방사선치료비 | 지급 이벤트 다름 (진단 vs 방사선) |
| 암진단비 vs 암수술비 | 지급 이벤트 다름 (진단 vs 수술) |
| 암진단비 vs 암입원일당 | 지급 이벤트 다름 (진단 vs 입원) |
| 암진단비 vs 암통원일당 | 지급 이벤트 다름 (진단 vs 통원) |

### CONDITIONAL (조건부 분리)

| 대상 | 분리 조건 | 처리 방식 |
|---|---|---|
| 유사암 / 소액암 | 진단 이벤트 동일 | suffix 또는 별도 code (A4210) |
| 특정암 / 고액암 | 진단 이벤트 동일 | suffix 또는 별도 code (A4209) |
| 4대특정암 하위 분류 | 지급 조건/금액 구조 다름 | suffix 분리 (A4209_2, A4209_3...) |
| 제자리암 / 경계성종양 | 유사암 하위 분류 | suffix 분리 (A4210_1, A4210_2...) |

### NO (분리하지 않는다)

| 사례 | 이유 |
|---|---|
| 보험사별 명칭 차이 | 동일 지급 이벤트 + 동일 지급 구조 |
| 괄호 표기 차이 | 예: "암진단비(유사암제외)" vs "암(유사암제외)진단비" |
| 띄어쓰기 차이 | 예: "암 진단비" vs "암진단비" |

## 3. Canonical Code 생성 규칙 (질병코드 없이)

### 패턴

| Code | 의미 | 예시 |
|---|---|---|
| A4200 | 암진단비 (기본) | 암진단비(유사암제외) |
| A4200_1 | 암진단비 (특정 조건) | 암진단비(유사암제외) |
| A4200_2 | 암진단비 (다른 특정 조건) | 암(4대특정암제외)진단비 |
| A4200_3 | 암진단비 (또 다른 조건) | 신재진단암진단비 |
| A4200_R | 재진단암 | - |
| A4200_T | 암치료비 | - |
| A4200_S | 암수술비 | - |
| A4200_H | 암입원/통원 | - |

### 규칙

1. **이벤트 단위가 바뀌면 suffix 분리** (R/T/S/H)
2. **동일 이벤트 내 조건 차이는 숫자 suffix** (_1, _2, _3...)
3. **숫자 무한 증식 금지** (최대 _9까지)

## 4. Excel 반영 판단 기준

### 단일 판단 기준

**"지급 이벤트와 지급 조건이 동일하면 alias, 이벤트가 다르면 suffix 또는 신규 Canonical"**

### 각 암 담보 처리 방식 (하나만 선택)

| 방식 | 조건 | Excel 작업 |
|---|---|---|
| ✅ 기존 Canonical의 alias | 지급 이벤트 + 조건 동일 | 기존 row의 보험사 컬럼에 raw_name 추가 |
| ✅ 기존 Canonical + suffix | 동일 카테고리, 조건 다름 | 신규 row (coverage_code에 suffix 추가) |
| ✅ 완전 신규 Canonical row | 새로운 지급 이벤트 | 신규 row (신규 coverage_code) |

## 5. DO / DO NOT

### DO

- Canonical 분해 기준을 사람이 판단
- Excel 반영 전 항상 본 문서 기준 확인
- 지급 이벤트 정의를 최우선 기준으로 사용

### DO NOT

- ❌ 매칭률 기준으로 Canonical 설계
- ❌ 자동 분류 / 키워드 유사도
- ❌ 질병코드 (ICD/KCD) 도입
- ❌ LLM / vector / embedding
- ❌ 숫자 suffix 무한 증식 (최대 _9)

## 6. Policy Lock

본 문서는 암 담보 Canonical 분해의 **유일한 정책 기준**이다.

- 이후 Excel 수정은 본 문서 기준에 따른 기계적 작업
- FAIL 발생 시 정책 위반 여부만 점검
- 정책 변경은 본 문서 수정으로만 가능
